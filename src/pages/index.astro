---
import Layout from '@layouts/Layout.astro';
import AboutMeCodeBlock from '@components/AboutMeCodeBlock.md';

const calculateAge = (birthday: Date) => {
  const today = new Date();

  let age = today.getFullYear() - birthday.getFullYear();
  const monthDifference = today.getMonth() - birthday.getMonth();
  if (
    monthDifference < 0 ||
    (monthDifference === 0 && today.getDate() < birthday.getDate())
  ) {
    age--;
  }

  return age;
};

const birthday = new Date('2003-04-19');
const age = calculateAge(birthday);

type Project = {
  name: string;
  description: string;
  link: string;
};

const projects: Array<Project> = [
  {
    name: 'nixos-cli',
    description: 'A unified NixOS tooling replacement for nixos-* utilities',
    link: 'https://nix-community.github.io/nixos-cli',
  },
  {
    name: 'nixed',
    description:
      "I've nixed any chance I have at touching grass by building this config",
    link: 'https://github.com/water-sucks/nixed',
  },
  {
    name: 'darkrose.nvim',
    description: "A neovim colorscheme (also this site's!)",
    link: 'https://github.com/water-sucks/darkrose.nvim',
  },
  {
    name: 'brainfuck.nix',
    description: 'A colossal brainfuck to figure out why this was made',
    link: 'https://github.com/water-sucks/brainfuck.nix',
  },
  {
    name: 'snare.dev',
    description: 'The website where there be dragons',
    link: 'https://snare.dev',
  },
  {
    name: 'candor',
    description: 'Coming soon to a town near you?',
    link: 'https://www.youtube.com/watch?v=dQw4w9WgXcQ',
  },
];
---

<Layout
  title="Home"
  description="Varun Narravula's personal website. I'm just a dude who's aspiring, but never achieving."
  pageType="home"
>
  <h1>@water-sucks (Varun)</h1>

  <p>Aspiring, but never achieving.</p>

  <AboutMeCodeBlock />

  <p>
    Yet another developer from out of the woodworks, up at odd times doing who
    knows what. I also play drums.
  </p>
  <hr />

  <h2>Musings</h2>
  <p>A <a href="/musings">blog</a>. Because I'm worth listening to, I think?</p>
  <h3>Quoth Mine</h3>
  <p>
    Oh, and also a <a href="/quoth-mine">quote mine</a> from mini things I found
    interesting.
  </p>
  <hr />

  <h2>Projects</h2>
  <p>
    Just dumb af things I've built over the years. {age} so far, too many left to
    go.
  </p>
  <div class="projects-grid">
    {
      projects.map((project) => (
        <a href={project.link} class="project-item">
          <h3>{project.name}</h3>
          <p>{project.description}</p>
        </a>
      ))
    }
  </div>
  <hr />

  <h2>FAQ</h2>
  <p>
    An <a href="/faq">FAQ</a>, because I'm really that mysterious. I keep
    telling you this too, but you never listen ;&rbrace;
  </p>
  <hr />

  <p>
    Or, if you're here to potentially hire me, my
    <a href="/resume.pdf">résumé</a>
    is up for grabs.
  </p>
</Layout>

<style>
  h2 {
    color: #a26b35;
  }

  h3 {
    color: #8b2950;
  }

  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 7px;
    margin-top: 1em;
    margin-bottom: 1em;
  }

  .project-item {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding: 0.5em;
    background-color: #121212;
    color: white;
    text-decoration: none;
    text-align: center;
    aspect-ratio: 1;
  }

  .project-item h3 {
    margin-bottom: 0.5em;
    color: #eee;
  }

  .project-item p {
    font-size: 0.9em;
    color: #ccc;
  }

  .project-item:hover {
    background-color: #222222;
  }
</style>
